{% extends "base.html" %}

{% block title %}Meu Perfil e Prefer√™ncias{% endblock %}

{% block content %}
<div class="profile-page-main">
    <div class="profile-container">
        <h1 class="page-title">Bem-vindo(a), {{ user.name.split()[0] }}!</h1>
        <p class="subtitle">Gerencie suas informa√ß√µes e personalize sua experi√™ncia.</p>
        
        <div class="profile-dashboard-grid">
            
            <section class="info-section">
                <h2>Informa√ß√µes da Conta</h2>
                <form class="profile-form" method="POST" action="#">
                    
                    <div class="form-group">
                        <label for="profile-name">Nome Completo</label>
                        <input type="text" id="profile-name" name="name" value="{{ user.name }}" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="profile-email">E-mail</label>
                        <input type="email" id="profile-email" name="email" value="{{ user.email }}" disabled>
                        <small class="form-hint">E-mail s√≥ pode ser alterado via suporte.</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="profile-password">Alterar Senha</label>
                        <input type="password" id="profile-password" name="password" placeholder="Deixe vazio para manter a atual">
                    </div>
                    
                    <button type="submit" class="btn btn-primary profile-btn">Salvar Informa√ß√µes</button>
                </form>
            </section>
            
            <section class="preferences-section">
                <h2>Prefer√™ncias</h2>
                <form class="profile-form" method="POST" action="#">
                    
                    <div class="form-group">
                        <label for="default-size">Tamanho Padr√£o</label>
                        <select id="default-size" name="size_default">
                            <option value="">Nenhum</option>
                            {% for size in ['38', '39', '40', '41', '42', '43'] %}
                                <option value="{{ size }}" {% if user.preferences.size_default == size %}selected{% endif %}>
                                    {{ size }}
                                </option>
                            {% endfor %}
                        </select>
                        <small class="form-hint">Seu tamanho favorito ser√° pr√©-selecionado.</small>
                    </div>
                    
                    <div class="form-group checkbox-group">
                        <input type="checkbox" id="newsletter" name="newsletter" {% if user.preferences.newsletter %}checked{% endif %}>
                        <label for="newsletter">Receber Newsletter e Ofertas Exclusivas</label>
                    </div>
                    
                    <div class="form-group radio-group">
                        <label>Tema da Loja</label>
                        <div>
                            <input type="radio" id="theme-light" name="theme" value="claro" {% if user.preferences.theme == 'claro' %}checked{% endif %}>
                            <label for="theme-light">Claro</label>
                            
                            <input type="radio" id="theme-dark" name="theme" value="escuro" {% if user.preferences.theme == 'escuro' %}checked{% endif %}>
                            <label for="theme-dark">Escuro (Em breve)</label>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-secondary profile-btn">Salvar Prefer√™ncias</button>
                </form>
            </section>
        </div>
    </div>
</div>

<section class="payment-section">
    <h2>üí≥ Formas de Pagamento</h2>
    
    {% if user.payment_methods %}
    <div class="payment-list">
        {% for card in user.payment_methods %}
        <div class="card-item {% if card.default %}card-default{% endif %}">
            <span class="card-brand">{{ card.brand }}</span>
            <span class="card-number">‚Ä¢‚Ä¢‚Ä¢‚Ä¢ {{ card.last_four }}</span>
            <span class="card-expiry">V√°lido at√© {{ card.expiry }}</span>
            <div class="card-actions">
                {% if card.default %}
                    <span class="tag-default">Padr√£o</span>
                {% else %}
                    <button class="btn-action">Definir como Padr√£o</button>
                {% endif %}
                <button class="btn-action btn-delete">Excluir</button>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p class="no-payment">Voc√™ n√£o possui cart√µes cadastrados.</p>
    {% endif %}

    <h3 class="add-card-title">Adicionar Novo Cart√£o</h3>
    <form class="profile-form add-card-form" method="POST" action="#">
        
        <div class="form-group">
            <label for="card-number">N√∫mero do Cart√£o</label>
            <input type="text" id="card-number" name="card_number" placeholder="xxxx xxxx xxxx xxxx" required>
        </div>
        
        <div class="form-group-inline">
            <div class="form-group">
                <label for="card-expiry">Validade (MM/AA)</label>
                <input type="text" id="card-expiry" name="card_expiry" placeholder="MM/AA" required>
            </div>
            <div class="form-group">
                <label for="card-cvv">CVV</label>
                <input type="text" id="card-cvv" name="card_cvv" placeholder="123" required>
            </div>
        </div>
        
        <div class="form-group">
            <label for="card-holder">Nome no Cart√£o</label>
            <input type="text" id="card-holder" name="card_holder" required>
        </div>
        
        <button type="submit" class="btn btn-primary">Adicionar Cart√£o</button>
    </form>
</section>

</div> 
{% endblock %}